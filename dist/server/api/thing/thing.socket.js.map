{"version":3,"sources":["../../../../server/api/thing/thing.socket.js"],"names":[],"mappings":";;;;AAIA,YAAY,CAAC;;;;;;AAEb,IAAI,WAAW,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;;;AAG5C,IAAI,MAAM,GAAG,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;;AAEzB,SAAS,QAAQ,CAAC,MAAM,EAAE;;AAE/B,OAAK,IAAI,CAAC,GAAG,CAAC,EAAE,YAAY,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,YAAY,EAAE,CAAC,EAAE,EAAE;AACnE,QAAI,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;AACtB,QAAI,QAAQ,GAAG,cAAc,CAAC,QAAQ,GAAG,KAAK,EAAE,MAAM,CAAC,CAAC;;AAExD,eAAW,CAAC,EAAE,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;AAChC,UAAM,CAAC,EAAE,CAAC,YAAY,EAAE,cAAc,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC;GAC1D;CACF;;AAGD,SAAS,cAAc,CAAC,KAAK,EAAE,MAAM,EAAE;AACrC,SAAO,UAAS,GAAG,EAAE;AACnB,UAAM,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;GACzB,CAAC;CACH;;AAED,SAAS,cAAc,CAAC,KAAK,EAAE,QAAQ,EAAE;AACvC,SAAO,YAAW;AAChB,eAAW,CAAC,cAAc,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;GAC7C,CAAC;CACH","file":"thing.socket.js","sourcesContent":["/**\r\n * Broadcast updates to client when the model changes\r\n */\r\n\r\n'use strict';\r\n\r\nvar ThingEvents = require('./thing.events');\r\n\r\n// Model events to emit\r\nvar events = ['save', 'remove'];\r\n\r\nexport function register(socket) {\r\n  // Bind model events to socket events\r\n  for (var i = 0, eventsLength = events.length; i < eventsLength; i++) {\r\n    var event = events[i];\r\n    var listener = createListener('thing:' + event, socket);\r\n\r\n    ThingEvents.on(event, listener);\r\n    socket.on('disconnect', removeListener(event, listener));\r\n  }\r\n}\r\n\r\n\r\nfunction createListener(event, socket) {\r\n  return function(doc) {\r\n    socket.emit(event, doc);\r\n  };\r\n}\r\n\r\nfunction removeListener(event, listener) {\r\n  return function() {\r\n    ThingEvents.removeListener(event, listener);\r\n  };\r\n}\r\n"]}